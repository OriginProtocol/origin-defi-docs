# Перераспределение & Смарт-Контракты

Если Вы используете кошелек с мульти-подписями или другой смарт-контракт для участия в перераспределении OUSD, Вы должны вызвать функцию OUSD `rebaseOptIn()`. Это относится только к смарт-контрактам, так как стандартные кошельки EOA регистрируются автоматически.

{% hint style="info" %}
Кошельки с мульти-подписями или другие смарт-контракты должны вызвать функцию `rebaseOptIn()` чтобы получать доход.
{% endhint %}

Одна из проблем с перераспределением таких валют, как OUSD, заключается в том, что они не очень хорошо работают с автоматическими маркет-мейкерами (AMM) как, например, Uniswap или Balancer. Эти децентрализованные биржи полагаются на спрос и предложение для определения цены торгуемых активов. Это разлаживает математику, когда сумма OUSD, удерживаемая контрактом, неожиданно изменяется из-за генерирования новой доходности.

Ранее мы добавили функцию [bandaid](https://medium.com/originprotocol/upgrades-to-the-ousd-smart-contracts-deliver-higher-yield-and-better-uniswap-support-aa592e51d3f2), которой вызывалась функция Uniswap `sync()` каждый раз, когда `rebase()` запускалась на контрактах OUSD. Это позволяло пользователям не видеть уродливое сообщение об ошибке во время торгов OUSD на Uniswap, но все так же приводило к потерям в системе. После вызова функции синхронизации Uniswap обнаруживает, что в хранилище больше OUSD, чем USDT, что ошибочно понижает цену OUSD относительно USDT. Мы, конечно, можем рассчитывать на то, что арбитражеры скорректируют цену, однако было бы лучше, если бы мы смогли полностью избежать этих потерь. Учитывая постоянно растущее количество конкурирующих AMM и форков Uniswap, быстро стало бы невозможным рассматривать их все в частном порядке, не говоря уже о дорогостоящем газе для транзакций.

После долгих обсуждений мы решили, что наиболее масштабируемое решение - это сделать смарт-контракты, напрямую рассылая полученный доход через механизм перераспределения. Это решает проблему с увеличением предложения на AMM, но при этом по-прежнему предоставляет возможность участвовать и получать доход кошелькам с мульти-подписями и другим смарт-контрактам.

{% hint style="warning" %}
Если Вы развертываете контракт и собираетесь вызвать`rebaseOptIn()`, чтобы получить доход, вы не можете вызвать его из конструктора контрактов. Контракт должен быть развернут, прежде чем его можно будет вызвать.
{% endhint %}

Если Вы используете кошелек с мульти-подписями, например [Gnosis Wallet](https://github.com/gnosis/MultiSigWallet) или [Gnosis Safe](https://gnosis-safe.io/), Вам понадобится [адрес контракта прокси для OUSD](../../smart-contracts/registry.md) и соответствующий [ABI](https://api.etherscan.io/api?module=contract&action=getabi&address=0x1ae95dd4eeae7ed03da79856c2d44ffa3318f805). Как только Вы их добавите, получите возможность вызвать функцию `rebaseOptIn()` чтобы выбрать получение заработка через перераспределение, или `rebaseOptOut()` чтобы снова ее отключить.





